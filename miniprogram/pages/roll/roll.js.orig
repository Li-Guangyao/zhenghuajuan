Page({
	data: {
<<<<<<< HEAD
		pageHeight: 0,
		/*
=======
>>>>>>> e0a0ea329808a8d794246a40f6617ac5c962dc99
		recordList: [{
			rollName: "学习",
			rollCount: 30,
			rollTime: 30,

			avatarUrl: "",
			timeDiff: "1天前",
			nickName: "我自己",
			likeValue: 42,
			content: "今天学了30分钟的Java的反射",
			fileList: [],
		}, {
			rollName: "编程",
			rollCount: 15,
			rollTime: 15,

			avatarUrl: "",
			timeDiff: "1天前",
			nickName: "我自己",
			likeValue: 28,
			content: "专注了15分钟",
			fileList: [],
		}, {

			avatarUrl: "",
			timeDiff: "1天前",
			nickName: "我自己",
			likeValue: 28,
			content: "今天啥也没干",
			fileList: [],
		}],
<<<<<<< HEAD
		*/
		userInfo: null,
		recordList: [],
		showPopup: true,

		timeIndex: 0,
		times: [15, 30, 45, 60, 90, 120],
		rollCounts: [15, 30, 45, 60, 90, 120]
	},

	onLoad: async function (options) {
		await this.judgeLogin();
	},

	async judgeLogin() {
		var userInfo = await wx.getStorageSync('userInfo')
		if (!userInfo) {
			wx.showModal({
				title: '卷王同志，请先登陆再来',
				showCancel: true,

				success(res) {
					if (res.confirm) {
						wx.switchTab({
							url: '../my/my',
						})
					} else if (res.cancel) {
						wx.navigateBack({
							delta: 1,
						})
					}
				}
			})
		} else this.setData({ userInfo })
=======

		name: '',
		// recordList: [],
		showDialog: false,
		showPopup: false,

		durationIndex: 0,
		duration: [15, 30, 45, 60, 90, 120],
		rollNumber: [15, 30, 45, 60, 90, 120]
	},

	// 点击页面下方+按钮
	showDialog() {
		this.setData({
			showDialog: true
		})
	},

	// 在Dialog中，点击时间
	showPopup() {
		this.setData({
			showPopup: !this.data.showPopup
		})
>>>>>>> e0a0ea329808a8d794246a40f6617ac5c962dc99
	},

	inputActivityName(e) {
		console.log(e)
		this.setData({
			name: e.detail.value
		})
	},

	onDialogClose(e) {
		switch (e.detail) {
			case "confirm":
				wx.navigateTo({
					url: '../rolling/rolling?duration=' + this.data.duration[this.data.durationIndex] + "&name=" + this.data.name,
				})
				break;
			default:
				this.setData({
					showDialog: false,
					durationIndex: 0
				});
				break;
		}
	},

	// 在时间弹出框中，选择了一个时间长度
	choseDuration(e) {
		this.setData({
			durationIndex: e.detail.index
		})
		this.showPopup()
	},
})