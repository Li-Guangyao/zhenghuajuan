<view class="post">

	<view class="user-info">
		<image class="user-avatar" mode="aspectFill" src="{{post.avatar}}"></image>
		<view class="nickname-time">
			<view class="user-nickname">{{post.nickname}}</view>
			<view class="pub-time">{{post.timeDiff}}</view>
		</view>
	</view>

	<!-- <rich-text class="content" nodes="{{post.content}}" /> -->
	<text class="content">{{post.content}}</text>

	<view class="media" wx:if="{{post.photoList.length!=0}}" wx:for="{{post.photoList}}" wx:for-item="item2"
		wx:for-index="indPex2" wx:key="index2">
		<video class="post-video" custom-cache="{{false}}" wx:if="{{item2.type=='video'}}"
			show-fullscreen-btn="{{false}}" play-btn-position="center" muted="{{true}}" object-fit="cover"
			src="{{item2.url}}" data-index2="{{index2}}" bindtap="previewMadia"></video>
		<image class="post-image" wx:if="{{item2.type=='image'}}" mode="aspectFill" src="{{item2.url}}"
			data-index2="{{index2}}" bindtap="previewMadia"></image>
	</view>

	<view class="post-info">
		<view class="location" wx:if="{{post.location}}">
			<van-icon name="location-o" size="25rpx" />
			<view class="location-name">
				{{post.location.name}}
			</view>
		</view>
		<view class="interaction">
			<view wx:if="{{chosenPopupItemIndex!=-1}}">+{{popupItem[chosenPopupItemIndex].value}}</view>
			<image class="icon-huajuan" wx:if="{{chosenPopupItemIndex==-1}}" mode="aspectFit" bindtap="giveLike"
				src="../../icon/roll.png"></image>
			<image class="icon-huajuan" wx:if="{{chosenPopupItemIndex!=-1}}" mode="aspectFit" bindtap="cancelLike"
				src="../../icon/roll2.png"></image>
			<image class="icon-comment" mode="aspectFit" bindtap="showInput" src="../../icon/comment.png"></image>
		</view>
	</view>

	<view class="input" wx:if="{{showInput}}">
		<textarea class="input-textarea" model:value="{{inputComment}}" auto-focus="{{true}}" placeholder="说点什么吧~"
			auto-height maxlength="2000" adjust-position="{{true}}" bindconfirm="pubComment"
			bindblur="foldInput"></textarea>
	</view>

</view>

<view class="comment" wx:if="{{commentList.length!=0}}">
	<view class="comment-title">评论</view>
	<view class="comment-item" wx:for="{{commentList}}" wx:key="index" data-index="{{index}}"
		bindtap="showInputForComment">
		<view class="user-info">
			<image class="user-avatar" mode="aspectFill" src="{{item.avatar}}"></image>
			<view class="nickname-time">
				<view class="user-nickname">{{item.nickname}}</view>
				<view class="pub-time">{{item.timeDiff}}</view>
			</view>
		</view>
		<text class="content">{{item.content}}</text>
	</view>
</view>

<view class="input-for-comment" wx:if="{{showInputForComment}}">
	<view class="input-for-comment-title">{{commentSb}}</view>
	<textarea class="input-for-comment-textarea" model:value="{{inputCommentComment}}" auto-focus="{{true}}"
		fixed="{{true}}" adjust-position="{{true}}" placeholder="说点什么吧~" auto-height maxlength="2000"
		bindconfirm="pubCommentComment" bindblur="foldInputForComment" show-confirm-bar="{{true}}"
		bindkeyboardheightchange="keyboardHeightChange"></textarea>
</view>


<van-popup custom-style="van-popup" show="{{ showPopup }}" position="bottom" round="{{true}}" bind:close="closePopup">
	<van-cell-group>
		<van-cell wx:for="{{popupItem}}" wx:key="index" title="{{item.name}}" value="+{{item.value}}"
			data-index="{{index}}" bind:click="tapLikeItem" clickable="{{true}}">
			<view slot="right-icon">
				<image class="popup-image" mode="widthFix" src="../../icon/roll2.png"></image>
			</view>
		</van-cell>
	</van-cell-group>
</van-popup>


<!-- <van-popup show="{{ showPopup }}" position="bottom" bind:close="closePopup" round="{{true}}" custom-style="van-popup">
	<view class="popup-goods-info">
		<image class="popup-image" mode="aspectFill" src="{{goods.display_photo[0]}}"></image>
		<view class="popup-price">￥{{changedPrice}}</view>
	</view> -->

<!-- 商品选项总共有两级，为l1和l2 -->
<!-- <view class="option" wx:for="{{goodsOption}}" wx:for-item="l1" wx:for-index="l1idx" wx:key="l1idx">
		<view class="option-title">{{l1.name}}</view>
		<view class="option-content {{l2.isChosen? 'isChosen': ' '}}" wx:for="{{l1.attribute}}" wx:for-item="l2"
			wx:for-index="l2idx" wx:key="l2idx" data-l1idx="{{l1idx}}" data-l2idx="{{l2idx}}" bindtap="choseOption">
			{{l2.name}}</view>
	</view>

	<view class="button-area">
		<van-button custom-class="popup-button" type="default" bindtap="tapBuy" color="#f11b27">购买</van-button>
	</view>
</van-popup> -->